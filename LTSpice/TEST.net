* /Users/ken/Downloads/TEST.asc
XU1 vinv N007 N010 N016 N001 N001 0 N013 N003 N008 N002 MP_01 0 LTC7061
C1 N001 0 0.22µ
R2 N010 N001 51k
R3 N016 0 250k
C3 N002 N003 1µ
D1 N001 N002 MBR20100CT
V1 N001 0 10
L1 N011 N012 50µ
A1 N007 0 0 0 0 vinv 0 0 BUF Vhigh=5 Vlow=0 Vt=2.5
B1 N007 0 V=if(V(Vref)>V(Vcarr),5,0)
V3 Vcarr 0 PULSE(0 1 0 {tim(ftri)/2} {tim(ftri)/2} 0 {tim(ftri)})
V4 Vref 0 SINE(0.5 0.05 {fsig})
V§cell1 N006 N012 4
V§cell2 N017 0 4
R6 N011 N003 22m
R10 N004 N005 {Rsol}
R11 N012 N015 {Rsol}
R1 N005 N006 {R}
C2 N005 N006 {C}
R7 N015 N017 {R}
C4 N015 N017 {C}
XU2 N004 N009 N003 TW107N65C_G0_00
XU3 N003 N014 0 TW107N65C_G0_00
R4 N009 N008 20
R5 N014 N013 5
.model D D
.lib /Users/ken/Library/Application Support/LTspice/lib/cmp/standard.dio
.tran 0 {f(fsig)} {g(fsig)} uic
.func f(fsig) {5/fsig}
.func g(fsig) {2/fsig}
.param fsig=1000 R=1 Rsol=10m C=1m
.ic V(C2)=-7.5m V(C4)=-7.5m V(C3)=10
* battery1
* battery2
* PWM
* .save V(N004,N012) or .save I(R10)
.step param ftri list  10k 50k 100k
.func tim(ftri) {1/ftri}
.lib LTC7061.sub
.lib TW107N65C_G0_00_LTspice_rev1_enc.lib
.backanno
.end
